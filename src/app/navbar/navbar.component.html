<div id="Nav"  ref="TOPNAV" *ngIf="Auth">
    <!--Start of Div for Nav/SideNav-->  
       <div  class="navbar-fixed">
           <!---NavBar Start-->
               <nav class="black nav-extended w3-animate-bottom" style="position:fixed; top: 0%;">
                       <div class="nav-wrapper" > 
                           <div to="/" class="hide-on-med-and-down">
                                   <a href="#!" *ngIf="showCreateBtn" (click)="showCreateBtn=!showCreateBtn" class="brand-logo left" id="title"> Obsidian<i class="material-icons right white-text" style="rotation:180deg;">brightness_2</i>Rune</a>
                                   <a href="#!" *ngIf="!showCreateBtn" (click)="showCreateBtn=!showCreateBtn" class="brand-logo left" id="title"> Obsidian<i class="material-icons right orange-text" style="rotation:180deg; ">brightness_2</i>Rune</a>
                           </div>
                            <div to="/" class="hide-on-large-only">
                                   <a href="#!" class="brand-logo center" id="MobileTitle"> Obsidian<i class="material-icons right" style="rotation:180deg;">brightness_2</i>Rune</a>
                           </div>



                          
                           
                               <a href="#" v-on:click="sidebar" data-target="mobile-demo" class="sidenav-trigger"><i class="material-icons white-text">menu</i></a>
                           <ul class="right hide-on-med-and-down" style="padding-right:05%;">
                                <!-- Main Options for Menu -->
                                    <div class="startMenu" *ngIf="mainMenu">
                                        <li>
                                            <div >
                                                <i 
                                                (click)="toggleMenu('Home')"
                                                id="startMenuBtn"
                                                class="large material-icons">home</i>
                                            </div>
                                        </li>
                                        <li>
                                            <i 
                                            (click)="toggleMenu('Profile')"
                                            id="startMenuBtn"
                                            class="large material-icons">account_circle</i>
                                        </li>
                                        <li>
                                            <i 
                                            (click)="toggleMenu('Search')"
                                            id="startMenuBtn"
                                            class="large material-icons">search</i>
                                        </li>
                                        <li>
                                            <i 
                                            (click)="toggleMenu('Messages')"
                                            id="startMenuBtn"
                                            class="large material-icons">email</i>
                                        </li>
                                        <li>
                                            <i 
                                            (click)="toggleMenu('Notifications')"
                                            id="startMenuBtn"
                                            class="large material-icons">chat_bubble</i>
                                        </li>
                                        <li>
                                            <i 
                                            (click)="toggleMenu('Legacy')"
                                            id="startMenuBtn"
                                            class="large material-icons">brightness_2</i>
                                        </li>
                                        <li>
                                            <i 
                                            (click)="toggleMenu('Settings')"
                                            id="startMenuBtn"
                                            class="large material-icons">settings</i>
                                        </li>

                                    </div>

                                <!-- Active Menu once option is selected -->
                                    <!-- When home button is selected -->
                                        <div class="activeMenu" *ngIf="activeMenu">
                                            <li><i
                                                (click)="toggleMenu('Home')"
                                                class="material-icons" id="activeMenuIcon">home</i></li>
                                            <li><h5 
                                                (click)="redirect('Dashboard')"
                                                class="activeMenuBtn">Dashboard</h5></li>
                                            <li><h5 class="activeMenuBtn">Post</h5></li>
                                            <li><h5 (click)="redirect('newWriting')" class="activeMenuBtn">Anthology</h5></li>
                                            
                                        </div>

                                    <!-- When Profile Button is selected -->
                                    <div class="activeMenu" *ngIf="profileMenu">
                                        <li><i
                                            (click)="toggleMenu('Profile')"
                                            class="material-icons" id="activeMenuIcon">account_circle</i></li>
                                        <li><h5 class="activeMenuBtn">View_Profile</h5></li>
                                        <li><h5 class="activeMenuBtn">Edit_Profile</h5></li>
                                        <li><h5 class="activeMenuBtn">View_Legacies</h5></li>
                                        <li><h5 class="activeMenuBtn">View_Saved</h5></li>
                                    </div>
                                    <!-- When Search Button is selected -->
                                    <div class="activeMenu" *ngIf="searchMenu">
                                        <li><i
                                            (click)="toggleMenu('Search')"
                                            class="material-icons" id="activeMenuIcon">search</i></li>
                                        <li>
                                            <input 
                                                 id="searchTxt" 
                                                 placeholder="Search Obsidian. . ."
                                                 type="text" 
                                                 class="validate white-text" #searchTxt>
                                        </li>
                   
                                    </div>

                                    <!-- When Notification Button is selected -->
                                        <div class="activeMenu" *ngIf="legacyMenu">
                                            <li><i
                                                (click)="toggleMenu('Legacy')"
                                                class="material-icons" id="activeMenuIcon">brightness_2</i></li>
                                            <li><h5 class="activeMenuBtn">New_Legacy</h5></li>
                                            <li><h5 class="activeMenuBtn">View_Legacies</h5></li>
                                            <li><h5 class="activeMenuBtn">Saved_Legacies</h5></li>
                                            
                                        </div>

                                    <!-- When Message Button is selected -->
                                    <div class="activeMenu" *ngIf="messageMenu">
                                        <li><i
                                            (click)="toggleMenu('Messages')"
                                            class="material-icons" id="activeMenuIcon">email</i></li>
                                        <li><h5 class="activeMenuBtn">New</h5></li>
                                        <li><h5 class="activeMenuBtn" (click)="viewNewMessageList=!viewNewMessageList">View </h5></li>
                                 
                                        
                                    </div>

                                     <!-- When Notification Button is selected -->
                                     <div class="activeMenu" *ngIf="notificationMenu">
                                        <li><i
                                            (click)="toggleMenu('Notifications')"
                                            class="material-icons" id="activeMenuIcon">chat_bubble</i></li>
                                        <li><h5 class="activeMenuBtn">New_Notifcations</h5></li>
                                        <li><h5 class="activeMenuBtn">All_Notifcations</h5></li>
                                        <li><h5 class="activeMenuBtn">Friend_Requests</h5></li>
                                    </div>

                                       <!-- When Settings Button is selected -->
                                       <div class="activeMenu" *ngIf="settingsMenu">
                                        <li><i
                                            (click)="toggleMenu('Settings')"
                                            class="material-icons" id="activeMenuIcon">settings</i></li>
                                        <li><h5 class="activeMenuBtn">Main_Settings</h5></li>
                                        <li><h5 class="activeMenuBtn">Profile_Settings</h5></li>
                                        <li><h5 class="activeMenuBtn">Privacy_Settings</h5></li>
                                        <li>
                                            <h5 
                                            (click)="logout()"
                                            class="activeMenuBtn">Log_Out</h5>
                                        </li>
                                    </div>
                         
                           </ul>
                       </div>

               </nav>
           <!--End of Navbar--->
       </div>
    <!--End of Div for Nav/SideNav-->



               <!--Start of the side Nav Bar List items-->
               <ul  class="sidenav  center" id="mobile-demo" style="background-color:#000000;">
                <br>
                <li>
                    <img src="{{profileImg}}" style="width:25%; border-radius:50%;">
                </li>

               <li><div class="container"><hr></div></li>
                <li><div class="white-text center" ><h4><div (click)="redirectPage('home')" class="sidenav-close white-text">Home</div></h4></div></li>
                <li><div class="container"><hr></div></li>
                <li><div to="/Messages"  class="white-text center"><h4><a v-on:click="sidebar" class="sidenav-close white-text" href="#">Messages</a></h4></div></li>                         
                <li><div class="container"><hr></div></li>
                <li><div to="/profile" class="white-text"><h4><a v-on:click="sidebar" class="sidenav-close white-text" href="#">Profile</a></h4></div></li>
                <li><div class="container"><hr></div></li>
                <li><div to="" class="white-text"><h4><a v-on:click="GetRuiNotes" class="sidenav-close white-text" href="#">Notifications</a></h4></div></li>
                <li><div class="container"><hr></div></li>
                <li v-if="SignedIn"><h4 v-on:click="signout" class="red-text" style="border: none; background-color:#000000;"><a href="#" style="color:red;">Sign Out</a></h4></li>
                <li><a v-on:click="sidebar" class="sidenav-close white-text" href="#">X</a></li><br>
    </ul>
<!--End of the side Nav Bar List items-->


       <!-- Fixed Menu of service buttons -->
       <div 
       *ngIf="serviceMenu"
       class="serviceMenu">
            <div id="serviceList">
                <div
                *ngFor="let card of serviceCards; let i = index;">
                
                <div
                (click)="menuAction(card.action)"
                class="card" id="serviceMenuBtn">
                    <div class="card-content white-text">
                      <span class="card-title"><i class="material-icons small">{{card.icon}}</i> &nbsp; <b> {{card.title}}</b></span>
                      <div class="container"><hr class="solid"></div>
                      <p style="font-size: small;"><i>{{card.desc}}</i></p>
                    </div>        
                  </div>
                </div>
            </div>
       </div>


    <!-- Area for Fixed button at the bottom right of page -->
    <div *ngIf="showCreateBtn"> 
        <div  
        *ngIf="!serviceMenu"
        class="serviceCard ">
            <div 
            (click)="serviceMenu=!serviceMenu;"
            class="btn btn-large  pulse" id="serviceBtn">
                New  <i class="material-icons large right">send</i>
            </div>
        </div>
    </div>


    <!-- Area for new Post -->
    <div class="row" >
        <div class="container" >
            <div class="center">
                <div 
                *ngIf="displayPostModal"
                (click)="closePostModal();" 
                id="modal">
                    <div class="col m8 l8 s12 offset-l2 offset-m2">
                        <div 
                        (click)="preSelection=true"
                        id="modal1">
                            <div class="center" >
                                <h3 id="newPostHeader">New Post</h3>
                            </div>
                            <div class="row">
                                <div class="col s12 m10 offset-m1">
                                    <input 
                                    [(ngModel)]="newTitle"
                                    id="title"
                                    placeholder="Title. . ." 
                                    type="text" 
                                    class="validate">
                                </div>
                            </div>                                                                      
                            <div 
                            (click)="preSelection=true"
                            class="modal-content">                                                             
                                <img                               
                                src="{{modalPostImage}}" 
                                id="postedImg" alt="">
                            <!-- writing Section -->
                                <!-- Area for the writing passage -->
                                    <div class="center">
                                        <div class="input-field col s12">
                                            <textarea
                                                [(ngModel)]="newText"
                                                placeholder="What do you have to say. . ?"
                                                id="writtenPassage" 
                                                class="materialize-textarea"></textarea>
                                        </div>
                                    </div>                
                                <div
                                class="center"
                                *ngFor="let collageImg of modalPostImages; let j = index;"
                                 >
                                <img 
                                 src="{{collageImg}}"                                 
                                 class="postModalCollageImg{{j}} z-depth-5">
                            </div>                                
                            </div>
                            <div 
                            (click)="preSelection=true"
                            class="modal-footer">
                                <div class="row">
                                    <div class="col s3"></div>
                                    <div class="col s2">
                                        <div class=" btn btn-large blue darken-4"> <i class="material-icons">image</i> </div>
                                    </div>
                                    <div class="col s2">
                                        <div 
                                        (click)="savePost()"
                                        class=" btn btn-large blue darken-4"> <b>Submit</b> </div>
                                    </div>  

                                </div>                                                                                            
                            </div>
                    </div>
                    </div>

                </div>
            </div>

        </div>
    </div>  




    <!-- This is the Big Update  -->


    <!-- Messages  -->
  <div class="messageList" *ngIf="viewNewMessageList">
    <h4 class="white-text"><i><u><b>Messages</b></u></i></h4>
    <div 
    id="testCardAevum"
    class="card"
    *ngFor="let card of newMessageList; let i = index;">
        <div class="space">
         
            <div
            (click)="selectMessage(card.id)"               
            class="card" 
            id="aevumItem">
            <img src="{{card.profileImg}}" class="" id="legacyImg">
            <div class="messageContext">
                <h5 class="messageTitle"><b>{{card.username}}</b></h5>
                <h6 class="messageTxt">{{card.message}}</h6>
            </div>

                <!-- <img src="https://firebasestorage.googleapis.com/v0/b/obsidianrune-vuejs.appspot.com/o/N4Posts%2FItVzlZqqYXQukCYVI3TZodI7oQq2%2Fimages%2FFEB89DFE-9095-406D-BCDB-6D4E97F2BF40_1_101_o.jpeg?alt=media&token=9b32266d-727c-454a-8a22-2dbe0671621e" class="" id="legacyImg"> -->
                
            </div>                        
        </div>  
    </div>

  </div>

  <!-- This is the actual message Chat -->
  <div class="chatList" *ngIf="viewChatList">
      <br>
      <div 
      style="width: 35%; background-color: #000000; position: fixed; top: 7%; z-index: 10;">
        <div class="row">
            <div class="col s4">
              <img src="{{activeChatUserPhoto}}" class="" id="chatImg">
            </div>
            <div class="col s8">
                <h4 class="orange-text text-darken-3" style="position: fixed; top: 7%; left: 5%; z-index: 5; padding-left: 1%;"><b>{{activeChatUser}}</b></h4>
            </div>
        </div>
      </div>
      <div 
      id="testCardAevum"
      class="card"
      *ngFor="let card of chatList; let i = index;">
          <div class="space">   
            <div
            *ngIf="card.fromUserKey == curentUserID"                
            class="card" 
            id="chatCardU">              
                <div class="fromMessageContext">
                    <h6 class="UserMessageTxt">{{card.message}} + {{i}}</h6>                      
                </div>                                    
            </div>             
            <!-- <div
                *ngIf="card.fromUserKey != curentUserID;"
              class="card" 
              id="chatCard">              
                <div class="toMessageContext">
                    <h6 class="fromMessageTxt">{{card.message}} + {{i}}</h6>                      
                </div>                                    
              </div>     -->
                             
          </div>  
      </div>
      
  </div>


</div>